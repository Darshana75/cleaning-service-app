{"ast":null,"code":"var _jsxFileName = \"D:\\\\Development\\\\Job Assignments\\\\MetaZync\\\\cleaning-service-app\\\\frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport AuthPage from './components/Login';\nimport BookingForm from './components/BookingForm';\nimport BookingList from './components/BookingList';\nimport AdminPanel from './components/AdminPanel';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [token, setToken] = useState(localStorage.getItem('token') || '');\n  const [userId, setUserId] = useState(localStorage.getItem('userId') || '');\n  const [isAdmin, setIsAdmin] = useState(localStorage.getItem('isAdmin') === 'true');\n  const [bookings, setBookings] = useState([]);\n  const fetchBookings = async () => {\n    const res = await axios.get('http://localhost:5000/bookings', {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    const user = isAdmin ? res.data : res.data.filter(b => {\n      var _b$user_id;\n      return ((_b$user_id = b.user_id) === null || _b$user_id === void 0 ? void 0 : _b$user_id._id) === userId;\n    });\n    setBookings(user);\n  };\n  useEffect(() => {\n    if (token) fetchBookings();\n  }, [token]);\n  useEffect(() => {\n    console.log(\"isAdmin state:\", isAdmin);\n    console.log(\"localStorage isAdmin:\", localStorage.getItem('isAdmin'));\n  }, [isAdmin]);\n  const handleLogout = () => {\n    localStorage.clear();\n    setToken('');\n    setUserId('');\n    setIsAdmin(false);\n  };\n  const effectiveAdmin = isAdmin || localStorage.getItem('isAdmin') === 'true';\n  if (!token) {\n    return /*#__PURE__*/_jsxDEV(AuthPage, {\n      setToken: setToken,\n      setUserId: setUserId,\n      setIsAdmin: setIsAdmin\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-50 py-8 px-4 sm:px-8\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-3xl mx-auto\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between items-center mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-3xl font-bold text-indigo-700\",\n          children: effectiveAdmin ? 'Admin Panel' : 'User Dashboard'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleLogout,\n          className: \"text-sm text-red-600 underline hover:text-red-800 transition\",\n          children: \"Logout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this), effectiveAdmin ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(AdminPanel, {\n          token: token,\n          isAdmin: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-lg font-semibold mb-2 text-indigo-700\",\n            children: \"All Bookings\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(BookingList, {\n            bookings: bookings,\n            token: token,\n            fetchBookings: fetchBookings,\n            isAdmin: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(BookingForm, {\n          fetchBookings: fetchBookings,\n          token: token,\n          userId: userId\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(BookingList, {\n          bookings: bookings\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"RgmJnbDaCLNUraSzm7RSCJIlhAg=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","axios","AuthPage","BookingForm","BookingList","AdminPanel","jsxDEV","_jsxDEV","Fragment","_Fragment","App","_s","token","setToken","localStorage","getItem","userId","setUserId","isAdmin","setIsAdmin","bookings","setBookings","fetchBookings","res","get","headers","Authorization","user","data","filter","b","_b$user_id","user_id","_id","console","log","handleLogout","clear","effectiveAdmin","fileName","_jsxFileName","lineNumber","columnNumber","className","children","onClick","_c","$RefreshReg$"],"sources":["D:/Development/Job Assignments/MetaZync/cleaning-service-app/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport AuthPage from './components/Login';\nimport BookingForm from './components/BookingForm';\nimport BookingList from './components/BookingList';\nimport AdminPanel from './components/AdminPanel';\n\nfunction App() {\n  const [token, setToken] = useState(localStorage.getItem('token') || '');\n  const [userId, setUserId] = useState(localStorage.getItem('userId') || '');\n  const [isAdmin, setIsAdmin] = useState(localStorage.getItem('isAdmin') === 'true');\n  const [bookings, setBookings] = useState([]);\n\n  const fetchBookings = async () => {\n    const res = await axios.get('http://localhost:5000/bookings', {\n      headers: { Authorization: `Bearer ${token}` }\n    });\n    const user = isAdmin ? res.data : res.data.filter(b => b.user_id?._id === userId);\n    setBookings(user);\n  };\n\n  useEffect(() => {\n    if (token) fetchBookings();\n  }, [token]);\n\n  useEffect(() => {\n    console.log(\"isAdmin state:\", isAdmin);\n    console.log(\"localStorage isAdmin:\", localStorage.getItem('isAdmin'));\n  }, [isAdmin]);\n\n  const handleLogout = () => {\n    localStorage.clear();\n    setToken('');\n    setUserId('');\n    setIsAdmin(false);\n  };\n\n  const effectiveAdmin = isAdmin || localStorage.getItem('isAdmin') === 'true';\n\n  if (!token) {\n    return <AuthPage setToken={setToken} setUserId={setUserId} setIsAdmin={setIsAdmin} />;\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 py-8 px-4 sm:px-8\">\n      <div className=\"max-w-3xl mx-auto\">\n        <div className=\"flex justify-between items-center mb-6\">\n          <h1 className=\"text-3xl font-bold text-indigo-700\">\n            {effectiveAdmin ? 'Admin Panel' : 'User Dashboard'}\n          </h1>\n          <button\n            onClick={handleLogout}\n            className=\"text-sm text-red-600 underline hover:text-red-800 transition\"\n          >\n            Logout\n          </button>\n        </div>\n\n        {effectiveAdmin ? (\n          <>\n            <AdminPanel token={token} isAdmin={true} />\n            <div className=\"mt-8\">\n              <h2 className=\"text-lg font-semibold mb-2 text-indigo-700\">All Bookings</h2>\n              <BookingList\n  bookings={bookings}\n  token={token}\n  fetchBookings={fetchBookings}\n  isAdmin={true}\n/>\n            </div>\n          </>\n        ) : (\n          <>\n            <BookingForm fetchBookings={fetchBookings} token={token} userId={userId} />\n            <BookingList bookings={bookings} />\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}